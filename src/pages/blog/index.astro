---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import MainContent from '../../components/layout/MainContent.astro';
import Button from '../../components/ui/Button.astro';

// ëª¨ë“  ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°
const allPosts = await getCollection('blog', ({ data }) => {
  // í”„ë¡œë•ì…˜ì—ì„œëŠ” draftê°€ ì•„ë‹Œ í¬ìŠ¤íŠ¸ë§Œ, ê°œë°œì—ì„œëŠ” ëª¨ë“  í¬ìŠ¤íŠ¸
  return import.meta.env.PROD ? !data.draft && data.published : true;
});

// í•„í„°ë§ ë° ì •ë ¬ì„ ìœ„í•œ ë°ì´í„° ì²˜ë¦¬
const publishedPosts = allPosts.filter(p => p.data.published);

// ë‚ ì§œìˆœìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)
const sortedPosts = publishedPosts.sort((a, b) => 
  b.data.date.getTime() - a.data.date.getTime()
);

// í•„í„°ë§ì„ ìœ„í•œ ê³ ìœ  íƒœê·¸ì™€ ì¹´í…Œê³ ë¦¬ ì¶”ì¶œ
const allTags = [...new Set(publishedPosts.flatMap(p => p.data.tags))].sort();
const allCategories = [...new Set(publishedPosts.map(p => p.data.category))].sort();

// ì¹´í…Œê³ ë¦¬ í‘œì‹œëª… ë§¤í•‘
const categoryLabels = {
  'development': 'ê°œë°œ',
  'design': 'ë””ìì¸',
  'tutorial': 'íŠœí† ë¦¬ì–¼',
  'thoughts': 'ìƒê°',
  'news': 'ì†Œì‹',
  'other': 'ê¸°íƒ€'
};

// í˜ì´ì§€ ì •ë³´
const pageTitle = "ê°œë°œ ë¸”ë¡œê·¸ - ê¹€ê°œë°œ | React, JavaScript, ì›¹ ê°œë°œ íŠœí† ë¦¬ì–¼";
const pageDescription = `${publishedPosts.length}ê°œì˜ ê°œë°œ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ë¥¼ ë§Œë‚˜ë³´ì„¸ìš”. React, Vue.js, Node.js, TypeScript íŠœí† ë¦¬ì–¼ê³¼ ì›¹ ê°œë°œ ê²½í—˜ë‹´, ìµœì‹  ê¸°ìˆ  íŠ¸ë Œë“œë¥¼ ê³µìœ í•©ë‹ˆë‹¤. í”„ë¡ íŠ¸ì—”ë“œ, ë°±ì—”ë“œ ê°œë°œìë¥¼ ìœ„í•œ ì‹¤ìš©ì ì¸ ê°€ì´ë“œ.`;

// ì½ê¸° ì‹œê°„ ê³„ì‚° í•¨ìˆ˜ (ë‹¨ì–´ ìˆ˜ ê¸°ë°˜ ì¶”ì •)
function estimateReadTime(content: string): number {
  const wordsPerMinute = 200; // í‰ê·  ì½ê¸° ì†ë„
  const words = content.split(/\s+/).length;
  return Math.ceil(words / wordsPerMinute);
}
---

<Layout 
  title={pageTitle}
  description={pageDescription}
  image="/favicon.svg"
>
  <!-- Hero Section -->
  <section class="relative bg-gradient-to-br from-primary-50 via-white to-secondary-50 dark:from-primary-900/20 dark:via-secondary-900 dark:to-secondary-800 py-20 overflow-hidden">
    <!-- Background Elements -->
    <div class="absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="%239C92AC" fill-opacity="0.05"%3E%3Ccircle cx="3" cy="3" r="3"/%3E%3C/g%3E%3C/svg%3E')] opacity-30"></div>
    
    <MainContent maxWidth="4xl" padding="lg" class="relative z-10">
      <div class="text-center space-y-6">
        <!-- ì•„ì´ì½˜ -->
        <div class="inline-flex items-center justify-center w-16 h-16 bg-primary-100 dark:bg-primary-900/30 rounded-2xl mb-4">
          <svg class="w-8 h-8 text-primary-600 dark:text-primary-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
          </svg>
        </div>
        
        <!-- ì œëª© -->
        <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold text-secondary-900 dark:text-white">
          ì›¹ ê°œë°œ ê¸°ìˆ  <span class="text-transparent bg-clip-text bg-gradient-to-r from-primary-600 to-secondary-600 dark:from-primary-400 dark:to-secondary-400">ë¸”ë¡œê·¸</span>
        </h1>
        
        <!-- ì„¤ëª… -->
        <p class="text-lg md:text-xl text-secondary-600 dark:text-secondary-300 max-w-2xl mx-auto leading-relaxed">
          ê°œë°œ ê²½í—˜, íŠœí† ë¦¬ì–¼, ê·¸ë¦¬ê³  ê¸°ìˆ ì— ëŒ€í•œ ìƒê°ë“¤ì„ ê³µìœ í•©ë‹ˆë‹¤. 
          í•¨ê»˜ ë°°ìš°ê³  ì„±ì¥í•˜ëŠ” ê°œë°œìê°€ ë˜ì–´ë³´ì•„ìš”.
        </p>
        
        <!-- Quick Stats -->
        <div class="grid grid-cols-2 lg:grid-cols-4 gap-6 max-w-2xl mx-auto mt-8">
          <div class="text-center">
            <div class="text-2xl font-bold text-primary-600 dark:text-primary-400">
              {publishedPosts.length}
            </div>
            <div class="text-secondary-600 dark:text-secondary-300 text-sm">
              ì´ í¬ìŠ¤íŠ¸
            </div>
          </div>
          <div class="text-center">
            <div class="text-2xl font-bold text-green-600">
              {publishedPosts.filter(p => p.data.featured).length}
            </div>
            <div class="text-secondary-600 dark:text-secondary-300 text-sm">
              ì¶”ì²œ ê¸€
            </div>
          </div>
          <div class="text-center">
            <div class="text-2xl font-bold text-blue-600">
              {allCategories.length}
            </div>
            <div class="text-secondary-600 dark:text-secondary-300 text-sm">
              ì¹´í…Œê³ ë¦¬
            </div>
          </div>
          <div class="text-center">
            <div class="text-2xl font-bold text-purple-600">
              {allTags.length}
            </div>
            <div class="text-secondary-600 dark:text-secondary-300 text-sm">
              íƒœê·¸
            </div>
          </div>
        </div>
      </div>
    </MainContent>
  </section>

  <!-- Filtering and Sorting Controls -->
  <section class="py-8 bg-white dark:bg-secondary-900 border-b border-secondary-200 dark:border-secondary-700">
    <MainContent maxWidth="6xl" padding="lg">
      <div class="flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between">
        <!-- Filter Controls -->
        <div class="flex flex-col sm:flex-row gap-4 flex-1">
          <!-- Search Input -->
          <div class="relative flex-1 max-w-md">
            <input
              type="text"
              id="blog-search"
              placeholder="í¬ìŠ¤íŠ¸ ê²€ìƒ‰..."
              class="w-full px-4 py-2 pl-10 border border-secondary-300 dark:border-secondary-600 rounded-lg 
                     bg-white dark:bg-secondary-800 text-secondary-900 dark:text-white
                     focus:ring-2 focus:ring-primary-500 focus:border-transparent
                     placeholder-secondary-500 dark:placeholder-secondary-400"
            />
            <svg class="absolute left-3 top-2.5 h-5 w-5 text-secondary-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
          </div>

          <!-- Category Filter -->
          <select
            id="category-filter"
            class="px-4 py-2 border border-secondary-300 dark:border-secondary-600 rounded-lg 
                   bg-white dark:bg-secondary-800 text-secondary-900 dark:text-white
                   focus:ring-2 focus:ring-primary-500 focus:border-transparent min-w-32"
          >
            <option value="">ëª¨ë“  ì¹´í…Œê³ ë¦¬</option>
            {allCategories.map(category => (
              <option value={category}>{categoryLabels[category] || category}</option>
            ))}
          </select>

          <!-- Tag Filter -->
          <select
            id="tag-filter"
            class="px-4 py-2 border border-secondary-300 dark:border-secondary-600 rounded-lg 
                   bg-white dark:bg-secondary-800 text-secondary-900 dark:text-white
                   focus:ring-2 focus:ring-primary-500 focus:border-transparent min-w-32"
          >
            <option value="">ëª¨ë“  íƒœê·¸</option>
            {allTags.map(tag => (
              <option value={tag}>{tag}</option>
            ))}
          </select>
        </div>

        <!-- Sort and Reset Controls -->
        <div class="flex gap-3">
          <!-- Sort Dropdown -->
          <select
            id="sort-posts"
            class="px-4 py-2 border border-secondary-300 dark:border-secondary-600 rounded-lg 
                   bg-white dark:bg-secondary-800 text-secondary-900 dark:text-white
                   focus:ring-2 focus:ring-primary-500 focus:border-transparent"
          >
            <option value="date-desc">ìµœì‹ ìˆœ</option>
            <option value="date-asc">ì˜¤ë˜ëœìˆœ</option>
            <option value="title-asc">ì œëª©ìˆœ (A-Z)</option>
            <option value="title-desc">ì œëª©ìˆœ (Z-A)</option>
          </select>

          <!-- Reset Button -->
          <button
            id="reset-filters"
            class="px-4 py-2 border border-secondary-300 dark:border-secondary-600 rounded-lg 
                   bg-white dark:bg-secondary-800 text-secondary-700 dark:text-secondary-300
                   hover:bg-secondary-50 dark:hover:bg-secondary-700 transition-colors"
          >
            ì´ˆê¸°í™”
          </button>
        </div>
      </div>

      <!-- Results Count -->
      <div class="mt-4">
        <p id="results-count" class="text-sm text-secondary-600 dark:text-secondary-400">
          {sortedPosts.length}ê°œì˜ í¬ìŠ¤íŠ¸
        </p>
      </div>
    </MainContent>
  </section>

  <!-- Blog Posts Grid -->
  <section class="py-12 bg-secondary-50 dark:bg-secondary-800">
    <MainContent maxWidth="6xl" padding="lg">
      <div id="posts-container" class="grid md:grid-cols-2 xl:grid-cols-3 gap-8">
        {sortedPosts.map((post) => (
          <article 
            class="group bg-white dark:bg-secondary-900 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden border border-secondary-200 dark:border-secondary-700"
            data-title={post.data.title.toLowerCase()}
            data-description={post.data.description.toLowerCase()}
            data-category={post.data.category}
            data-tags={post.data.tags.join(',')}
            data-date={post.data.date.getTime()}
          >
            <!-- ì´ë¯¸ì§€ -->
            {post.data.image && (
              <div class="relative overflow-hidden">
                <img 
                  src={post.data.image} 
                  alt={post.data.imageAlt || post.data.title}
                  class="w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"
                  loading="lazy"
                />
                <!-- Featured Badge -->
                {post.data.featured && (
                  <div class="absolute top-4 left-4">
                    <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400">
                      <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                      </svg>
                      ì¶”ì²œ
                    </span>
                  </div>
                )}
              </div>
            )}

            <!-- ì½˜í…ì¸  -->
            <div class="p-6">
              <!-- ë©”íƒ€ë°ì´í„° -->
              <div class="flex items-center justify-between text-sm text-secondary-500 dark:text-secondary-400 mb-3">
                <div class="flex items-center space-x-4">
                  <!-- ë‚ ì§œ -->
                  <span class="flex items-center">
                    <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                    {post.data.date.toLocaleDateString('ko-KR')}
                  </span>
                  
                  <!-- ì½ê¸° ì‹œê°„ -->
                  {post.data.readTime && (
                    <span class="flex items-center">
                      <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                      </svg>
                      {post.data.readTime}ë¶„
                    </span>
                  )}
                </div>

                <!-- ì¹´í…Œê³ ë¦¬ -->
                <span class="px-2 py-1 text-xs font-medium rounded-full bg-primary-100 text-primary-700 dark:bg-primary-900/30 dark:text-primary-300">
                  {categoryLabels[post.data.category] || post.data.category}
                </span>
              </div>

              <!-- ì œëª© -->
              <h3 class="text-xl font-bold text-secondary-900 dark:text-white mb-3 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors">
                <a href={`/blog/${post.slug}`} class="hover:underline">
                  {post.data.title}
                </a>
              </h3>

              <!-- ì„¤ëª… -->
              <p class="text-secondary-600 dark:text-secondary-300 mb-4 line-clamp-3">
                {post.data.excerpt || post.data.description}
              </p>

              <!-- íƒœê·¸ -->
              {post.data.tags.length > 0 && (
                <div class="flex flex-wrap gap-2 mb-4">
                  {post.data.tags.slice(0, 3).map(tag => (
                    <span class="text-xs px-2 py-1 bg-secondary-100 dark:bg-secondary-700 text-secondary-600 dark:text-secondary-300 rounded-md">
                      #{tag}
                    </span>
                  ))}
                  {post.data.tags.length > 3 && (
                    <span class="text-xs px-2 py-1 bg-secondary-100 dark:bg-secondary-700 text-secondary-500 dark:text-secondary-400 rounded-md">
                      +{post.data.tags.length - 3}
                    </span>
                  )}
                </div>
              )}

              <!-- ì•¡ì…˜ ë²„íŠ¼ -->
              <div class="flex items-center justify-between">
                <Button 
                  variant="primary" 
                  size="sm" 
                  href={`/blog/${post.slug}`}
                  class="flex-shrink-0"
                >
                  ì½ì–´ë³´ê¸°
                </Button>

                <!-- ì‘ì„±ì -->
                <span class="text-sm text-secondary-500 dark:text-secondary-400">
                  by {post.data.author}
                </span>
              </div>
            </div>
          </article>
        ))}
      </div>

      <!-- No Results Message -->
      <div id="no-results" class="text-center py-12 hidden">
        <div class="text-secondary-400 dark:text-secondary-500 text-6xl mb-4">
          ğŸ“
        </div>
        <h3 class="text-lg font-medium text-secondary-700 dark:text-secondary-300 mb-2">
          ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤
        </h3>
        <p class="text-secondary-500 dark:text-secondary-400">
          ë‹¤ë¥¸ í‚¤ì›Œë“œë‚˜ í•„í„°ë¥¼ ì‹œë„í•´ë³´ì„¸ìš”.
        </p>
      </div>
    </MainContent>
  </section>

  <!-- Related Projects Section -->
  <section class="py-16 bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20">
    <MainContent maxWidth="6xl" padding="lg">
      <div class="text-center mb-12">
        <h2 class="text-3xl md:text-4xl font-bold text-secondary-900 dark:text-white mb-4">
          ğŸš€ ë¸”ë¡œê·¸ ê¸°ìˆ ì„ ì‹¤ì œë¡œ ì ìš©í•œ í”„ë¡œì íŠ¸ë“¤
        </h2>
        <p class="text-lg text-secondary-600 dark:text-secondary-400 max-w-3xl mx-auto">
          ë¸”ë¡œê·¸ì—ì„œ ë‹¤ë£¬ React, Node.js, TypeScript ë“±ì˜ ê¸°ìˆ ë“¤ì„ ì‹¤ì œ í”„ë¡œì íŠ¸ì—ì„œ ì–´ë–»ê²Œ í™œìš©í–ˆëŠ”ì§€ í™•ì¸í•´ë³´ì„¸ìš”.
        </p>
      </div>

      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12">
        <!-- Web Development Project -->
        <div class="bg-white dark:bg-secondary-900 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-secondary-200 dark:border-secondary-700 group">
          <div class="flex items-center justify-between mb-4">
            <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center text-white text-2xl">
              ğŸ’»
            </div>
            <span class="text-xs px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full font-medium">
              Web App
            </span>
          </div>
          <h3 class="text-xl font-bold text-secondary-900 dark:text-white mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors">
            ì›¹ ê°œë°œ í”„ë¡œì íŠ¸
          </h3>
          <p class="text-secondary-600 dark:text-secondary-400 mb-4 text-sm">
            React, Next.js, TypeScriptë¥¼ í™œìš©í•œ í˜„ëŒ€ì ì¸ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ë“¤ì„ í¬íŠ¸í´ë¦¬ì˜¤ì—ì„œ ë§Œë‚˜ë³´ì„¸ìš”.
          </p>
          <div class="flex flex-wrap gap-2 mb-4">
            <span class="text-xs px-2 py-1 bg-secondary-100 dark:bg-secondary-800 text-secondary-600 dark:text-secondary-400 rounded">React</span>
            <span class="text-xs px-2 py-1 bg-secondary-100 dark:bg-secondary-800 text-secondary-600 dark:text-secondary-400 rounded">TypeScript</span>
            <span class="text-xs px-2 py-1 bg-secondary-100 dark:bg-secondary-800 text-secondary-600 dark:text-secondary-400 rounded">Next.js</span>
          </div>
          <Button href="/projects" variant="ghost" size="sm" class="w-full group-hover:bg-blue-50 dark:group-hover:bg-blue-900/20">
            í”„ë¡œì íŠ¸ ë‘˜ëŸ¬ë³´ê¸° â†’
          </Button>
        </div>

        <!-- Full Stack Project -->
        <div class="bg-white dark:bg-secondary-900 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-secondary-200 dark:border-secondary-700 group">
          <div class="flex items-center justify-between mb-4">
            <div class="w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center text-white text-2xl">
              ğŸ”§
            </div>
            <span class="text-xs px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-full font-medium">
              Full Stack
            </span>
          </div>
          <h3 class="text-xl font-bold text-secondary-900 dark:text-white mb-2 group-hover:text-green-600 dark:group-hover:text-green-400 transition-colors">
            í’€ìŠ¤íƒ ì†”ë£¨ì…˜
          </h3>
          <p class="text-secondary-600 dark:text-secondary-400 mb-4 text-sm">
            Node.js, Express, PostgreSQLë¡œ êµ¬ì¶•í•œ ë°±ì—”ë“œì™€ í”„ë¡ íŠ¸ì—”ë“œë¥¼ ì—°ê²°í•œ ì™„ì „í•œ ì›¹ ì„œë¹„ìŠ¤ë“¤ì…ë‹ˆë‹¤.
          </p>
          <div class="flex flex-wrap gap-2 mb-4">
            <span class="text-xs px-2 py-1 bg-secondary-100 dark:bg-secondary-800 text-secondary-600 dark:text-secondary-400 rounded">Node.js</span>
            <span class="text-xs px-2 py-1 bg-secondary-100 dark:bg-secondary-800 text-secondary-600 dark:text-secondary-400 rounded">PostgreSQL</span>
            <span class="text-xs px-2 py-1 bg-secondary-100 dark:bg-secondary-800 text-secondary-600 dark:text-secondary-400 rounded">API</span>
          </div>
          <Button href="/projects" variant="ghost" size="sm" class="w-full group-hover:bg-green-50 dark:group-hover:bg-green-900/20">
            í’€ìŠ¤íƒ í”„ë¡œì íŠ¸ ë³´ê¸° â†’
          </Button>
        </div>

        <!-- Developer Profile -->
        <div class="bg-white dark:bg-secondary-900 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-secondary-200 dark:border-secondary-700 group">
          <div class="flex items-center justify-between mb-4">
            <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center text-white text-2xl">
              ğŸ‘¨â€ğŸ’»
            </div>
            <span class="text-xs px-2 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-full font-medium">
              Developer
            </span>
          </div>
          <h3 class="text-xl font-bold text-secondary-900 dark:text-white mb-2 group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors">
            ê°œë°œì ì†Œê°œ
          </h3>
          <p class="text-secondary-600 dark:text-secondary-400 mb-4 text-sm">
            5ë…„ ê²½ë ¥ í’€ìŠ¤íƒ ê°œë°œìì˜ ê¸°ìˆ  ìŠ¤íƒ, ê°œë°œ ì² í•™, ê·¸ë¦¬ê³  ì„±ì¥ ì—¬ì •ì„ ìì„¸íˆ ì•Œì•„ë³´ì„¸ìš”.
          </p>
          <div class="flex flex-wrap gap-2 mb-4">
            <span class="text-xs px-2 py-1 bg-secondary-100 dark:bg-secondary-800 text-secondary-600 dark:text-secondary-400 rounded">5ë…„ ê²½ë ¥</span>
            <span class="text-xs px-2 py-1 bg-secondary-100 dark:bg-secondary-800 text-secondary-600 dark:text-secondary-400 rounded">í’€ìŠ¤íƒ</span>
            <span class="text-xs px-2 py-1 bg-secondary-100 dark:bg-secondary-800 text-secondary-600 dark:text-secondary-400 rounded">Seoul</span>
          </div>
          <Button href="/about" variant="ghost" size="sm" class="w-full group-hover:bg-purple-50 dark:group-hover:bg-purple-900/20">
            ê°œë°œì ì†Œê°œ ë³´ê¸° â†’
          </Button>
        </div>
      </div>

      <!-- Call to Action -->
      <div class="text-center">
        <div class="inline-flex items-center space-x-2 text-secondary-600 dark:text-secondary-400 mb-6">
          <span class="text-2xl">ğŸ¤</span>
          <span class="text-lg">í•¨ê»˜ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ì–´ë³´ê³  ì‹¶ìœ¼ì‹ ê°€ìš”?</span>
        </div>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <Button href="/contact" variant="primary" size="lg" class="inline-flex items-center">
            ê¸°ìˆ  ìƒë‹´ ë° í˜‘ì—… ë¬¸ì˜í•˜ê¸°
            <svg class="ml-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
            </svg>
          </Button>
          <Button href="/projects" variant="outline" size="lg" class="inline-flex items-center">
            ì „ì²´ í¬íŠ¸í´ë¦¬ì˜¤ ë‘˜ëŸ¬ë³´ê¸°
            <svg class="ml-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
            </svg>
          </Button>
        </div>
      </div>
    </MainContent>
  </section>

  <!-- CTA Section -->
  <section class="py-16 bg-gradient-to-r from-primary-600 to-secondary-600 dark:from-primary-700 dark:to-secondary-700">
    <MainContent maxWidth="4xl" padding="lg">
      <div class="text-center text-white">
        <h2 class="text-3xl md:text-4xl font-bold mb-4">
          ë” ë§ì€ ì½˜í…ì¸ ê°€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤
        </h2>
        <p class="text-xl text-primary-100 dark:text-primary-200 mb-8 max-w-2xl mx-auto">
          ê°œë°œ íŒ, íŠœí† ë¦¬ì–¼, í”„ë¡œì íŠ¸ í›„ê¸° ë“± ë‹¤ì–‘í•œ ê¸€ë“¤ì„ ì •ê¸°ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ê³  ìˆìŠµë‹ˆë‹¤.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <Button 
            variant="secondary" 
            href="/projects"
            class="bg-white text-primary-600 hover:bg-primary-50"
          >
            React/Node.js í”„ë¡œì íŠ¸ í¬íŠ¸í´ë¦¬ì˜¤ ë³´ê¸°
          </Button>
          <Button 
            variant="outline" 
            href="/contact"
            class="border-white text-white hover:bg-white hover:text-primary-600"
          >
            ê¸°ìˆ  ìƒë‹´ ë° í˜‘ì—… ë¬¸ì˜í•˜ê¸°
          </Button>
        </div>
      </div>
    </MainContent>
  </section>
</Layout>

<script>
  // ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ ë°ì´í„°ë¥¼ ì „ì—­ìœ¼ë¡œ ì €ì¥
  const postsData = [
    ...Array.from(document.querySelectorAll('[data-title]')).map(el => ({
      element: el as HTMLElement,
      title: el.getAttribute('data-title') || '',
      description: el.getAttribute('data-description') || '',
      category: el.getAttribute('data-category') || '',
      tags: el.getAttribute('data-tags')?.split(',').filter(Boolean) || [],
      date: new Date(parseInt(el.getAttribute('data-date') || '0'))
    }))
  ];

  let filteredPosts = [...postsData];

  // DOM ìš”ì†Œë“¤
  const searchInput = document.getElementById('blog-search') as HTMLInputElement;
  const categoryFilter = document.getElementById('category-filter') as HTMLSelectElement;
  const tagFilter = document.getElementById('tag-filter') as HTMLSelectElement;
  const sortSelect = document.getElementById('sort-posts') as HTMLSelectElement;
  const resetButton = document.getElementById('reset-filters') as HTMLButtonElement;
  const resultsCount = document.getElementById('results-count') as HTMLElement;
  const postsContainer = document.getElementById('posts-container') as HTMLElement;
  const noResults = document.getElementById('no-results') as HTMLElement;

  // í•„í„°ë§ í•¨ìˆ˜
  function filterPosts() {
    const searchTerm = searchInput?.value.toLowerCase() || '';
    const selectedCategory = categoryFilter?.value || '';
    const selectedTag = tagFilter?.value || '';

    filteredPosts = postsData.filter(post => {
      const matchesSearch = !searchTerm || 
        post.title.includes(searchTerm) || 
        post.description.includes(searchTerm);
      
      const matchesCategory = !selectedCategory || post.category === selectedCategory;
      const matchesTag = !selectedTag || post.tags.includes(selectedTag);

      return matchesSearch && matchesCategory && matchesTag;
    });

    sortPosts();
    updateDisplay();
  }

  // ì •ë ¬ í•¨ìˆ˜
  function sortPosts() {
    const sortBy = sortSelect?.value || 'date-desc';
    
    filteredPosts.sort((a, b) => {
      switch (sortBy) {
        case 'date-desc':
          return b.date.getTime() - a.date.getTime();
        case 'date-asc':
          return a.date.getTime() - b.date.getTime();
        case 'title-asc':
          return a.title.localeCompare(b.title);
        case 'title-desc':
          return b.title.localeCompare(a.title);
        default:
          return 0;
      }
    });
  }

  // í™”ë©´ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
  function updateDisplay() {
    // ëª¨ë“  í¬ìŠ¤íŠ¸ ìˆ¨ê¸°ê¸°
    postsData.forEach(post => {
      (post.element as HTMLElement).style.display = 'none';
    });

    // í•„í„°ëœ í¬ìŠ¤íŠ¸ë§Œ í‘œì‹œ
    filteredPosts.forEach((post, index) => {
      (post.element as HTMLElement).style.display = 'block';
      (post.element as HTMLElement).style.order = index.toString();
    });

    // ê²°ê³¼ ê°œìˆ˜ ì—…ë°ì´íŠ¸
    if (resultsCount) {
      resultsCount.textContent = `${filteredPosts.length}ê°œì˜ í¬ìŠ¤íŠ¸`;
    }

    // ê²°ê³¼ ì—†ìŒ ë©”ì‹œì§€ í‘œì‹œ/ìˆ¨ê¹€
    if (noResults && postsContainer) {
      if (filteredPosts.length === 0) {
        noResults.classList.remove('hidden');
        postsContainer.classList.add('hidden');
      } else {
        noResults.classList.add('hidden');
        postsContainer.classList.remove('hidden');
      }
    }
  }

  // í•„í„° ì´ˆê¸°í™” í•¨ìˆ˜
  function resetFilters() {
    if (searchInput) searchInput.value = '';
    if (categoryFilter) categoryFilter.value = '';
    if (tagFilter) tagFilter.value = '';
    if (sortSelect) sortSelect.value = 'date-desc';
    filterPosts();
  }

  // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
  searchInput?.addEventListener('input', filterPosts);
  categoryFilter?.addEventListener('change', filterPosts);
  tagFilter?.addEventListener('change', filterPosts);
  sortSelect?.addEventListener('change', filterPosts);
  resetButton?.addEventListener('click', resetFilters);

  // ìŠ¤í¬ë¡¤ ì• ë‹ˆë©”ì´ì…˜
  document.addEventListener('DOMContentLoaded', () => {
    const articles = document.querySelectorAll('article');
    
    // ì´ˆê¸° ì• ë‹ˆë©”ì´ì…˜
    articles.forEach((article, index) => {
      setTimeout(() => {
        (article as HTMLElement).style.opacity = '1';
        (article as HTMLElement).style.transform = 'translateY(0)';
      }, index * 100);
    });
    
    // ìŠ¤í¬ë¡¤ ì• ë‹ˆë©”ì´ì…˜ ì˜µì €ë²„
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    }, {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    });

    articles.forEach(article => {
      (article as HTMLElement).style.opacity = '0';
      (article as HTMLElement).style.transform = 'translateY(20px)';
      (article as HTMLElement).style.transition = 'opacity 0.6s ease, transform 0.6s ease';
      observer.observe(article);
    });
  });
</script>

<style>
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  article.visible {
    opacity: 1 !important;
    transform: translateY(0) !important;
  }
</style>
